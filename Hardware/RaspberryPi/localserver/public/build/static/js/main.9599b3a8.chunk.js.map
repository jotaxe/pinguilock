{"version":3,"sources":["components/Sidebar/sidebarItems.js","components/Api/externalApi.js","components/Api/localApi.js","components/Home/index.js","components/Access/deviceCard.js","components/Access/addDeviceCard.js","components/Access/index.js","components/Login/index.js","components/OTP/addOTPCard.js","components/OTP/OTPCard.js","components/OTP/index.js","components/Keys/autoSuggest.js","components/Keys/addKeyCard.js","components/Keys/keyCard.js","components/Keys/index.js","components/Routes/PrivateRoute.js","components/Routes/index.js","components/Sidebar/index.js","App.js","serviceWorker.js","index.js"],"names":["sidebarItems","react_default","a","createElement","NavLink","to","ListItem_default","button","index_es","react_fontawesome_index_es","icon","faHome","ListItemText_default","primary","faDoorOpen","faKey","faQrcode","feathers","require","socketio","io","app","socket","auth","rest","authenticate","googleToken","console","log","strategy","access_token","then","res","getUser","userID","localStorage","getItem","service","get","getUserName","id","configure","storage","window","socketApp","restClient","getMQTTInfo","getAdmin","deleteDevice","remove","device","type","devData","local_server","topic","device_name","find","query","localServer","local_server_id","data","fetch","Home","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","admin","undefined","_this2","Promise","resolve","setState","adminInfo","mail","_this$state","Component","DeviceCard","deleteClick","_id","_this$props","classes","localname","Card_default","className","card","CardContent_default","Typography_default","variant","component","name","title","color","gutterBottom","faVideo","cam_topic","pos","faLock","lock_topic","CardActions_default","Button_default","size","onClick","withStyles","minWidth","fontSize","marginBottom","AddDeviceCard","modal","lockTopic","camTopic","accessName","handleOpen","handleClose","accessNameChange","ev","target","value","camTopicChange","lockTopicChange","createDevice","create","addDevice","aria-label","Add_default","Modal_default","open","onClose","aria-labelledby","aria-describedby","modalPaper","style","top","concat","left","transform","Divider_default","TextField_default","label","onChange","creteDeviceButton","theme","minHeight","position","width","spacing","unit","backgroundColor","palette","background","paper","boxShadow","shadows","padding","marginTop","margin","createDeviceSelect","Access","devices","pairs","PairData","on","newDevice","prevState","removedDevice","filter","obj","newPair","removedPair","_this3","GridList_default","height","cols","GridListTile_default","addDeviceCard","map","key","deviceCard","Login","responseGoogle","response","loginResponse","profileObj","email","adminMail","Zi","setItem","user","location","href","catch","e","alert","firstLoginResponse","setAdmin","adminSet","firstUse","align","marginLeft","google_login","clientId","buttonText","onSuccess","onFailure","AddOtpCard","recieverEmail","locks","currentLock","emailChange","lockChange","createOtp","lock","reciever_email","granted_by_user","lock_id","locksOptions","MenuItem_default","InputLabel_default","htmlFor","Select_default","inputProps","disabled","OTPCard","otp","patch","status","aproveClick","userName","user_id","prevProps","accountText","OTP","otpList","otpData","newOtp","patchedOtp","addOTPCard","OTP_OTPCard","renderInputComponent","_inputProps$inputRef","inputRef","ref","other","objectWithoutProperties","assign","fullWidth","InputProps","node","input","renderSuggestion","suggestion","_ref","isHighlighted","matches","match","parts","parse","selected","part","index","highlight","String","fontWeight","text","getSuggestionValue","IntegrationAutosuggest","single","popper","suggestions","handleSuggestionsFetchRequested","_ref2","inputValue","deburr","trim","toLowerCase","inputLength","length","count","keep","slice","getSuggestions","handleSuggestionsClearRequested","handleChange","event","_ref3","newValue","defineProperty","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","root","dist_default","placeholder","container","suggestionsContainerOpen","suggestionsList","renderSuggestionsContainer","options","Paper_default","containerProps","square","children","React","flexGrow","zIndex","right","display","listStyleType","divider","AddKeyCard","userId","imageUri","userEmail","keyName","userArray","userObject","nameChange","createKey","lockId","faceUri","onDrop","pictureFile","pictureDataURLs","$select","autoSuggest","compiled_default","withIcon","imgExtension","maxFileSize","KeyCard","cardKey","avatarUri","image_path","uri","row","Avatar_default","avatar","src","justifyContent","marginRight","Key","keyList","lockIds","$in","keyData","newKey","removedKey","addKeyCard","keyCard","PrivateRoute","Route","render","Redirect","pathname","from","routes","Switch","exact","path","PrivateRoute_PrivateRoute","Keys","overflow","appBar","drawer","drawerPaper","content","default","paddingTop","toolbar","mixins","AppBar_default","Toolbar_default","noWrap","Drawer_default","List_default","App","createMuiTheme","main","secondary","core_styles","components_Sidebar","Boolean","hostname","ReactDOM","BrowserRouter","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9599b3a8.chunk.js","sourcesContent":["import React from 'react';\nimport { NavLink } from \"react-router-dom\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { ListItemIcon } from '@material-ui/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHome, faDoorOpen, faKey, faQrcode } from '@fortawesome/free-solid-svg-icons';\n\nexport const sidebarItems = (\n    <div>\n        <NavLink to = \"/\" >\n            <ListItem button>\n                <ListItemIcon>\n                    <FontAwesomeIcon icon={faHome}/>\n                </ListItemIcon>\n                <ListItemText primary=\"Home\"/>\n            </ListItem>\n        </NavLink>\n\n        <NavLink to = \"/access\" >\n            <ListItem button>\n                <ListItemIcon>\n                <FontAwesomeIcon icon={faDoorOpen}/>\n                </ListItemIcon>\n                <ListItemText primary=\"Manage Access\"/>\n            </ListItem>\n        </NavLink>\n\n        <NavLink to = \"/keys\">\n            <ListItem button>\n                <ListItemIcon>\n                <FontAwesomeIcon icon={faKey}/>\n                </ListItemIcon>\n                <ListItemText primary=\"Manage Keys\"/>\n            </ListItem>\n        </NavLink>\n\n        <NavLink to = \"/OTP\">\n            <ListItem button>\n                <ListItemIcon>\n                <FontAwesomeIcon icon={faQrcode}/>\n                </ListItemIcon>\n                <ListItemText primary=\"Manage QR Codes\"/>\n            </ListItem>\n        </NavLink>\n        \n        \n    </div>\n)","// const feathers = require('@feathersjs/feathers');\n// const rest = require('@feathersjs/rest-client');\n// const app = feathers();\n// const restClient = rest('http://192.168.0.11:3030')\n// const auth = require('@feathersjs/authentication-client');\n\nconst feathers = require('@feathersjs/feathers');\nconst socketio = require('@feathersjs/socketio-client');\nconst io = require('socket.io-client');\nconst app = feathers();\nconst socket = io('http://18.191.188.122'); //direccion de la api\nconst auth = require('@feathersjs/authentication-client')\nconst rest = require('@feathersjs/rest-client');\nconst restClient = rest('http://18.191.188.122')\n\n//app.configure(restClient.fetch(window.fetch));\napp.configure(socketio(socket));\napp.configure(auth({storage: window.localStorage})); \n\n\n\nexport function authenticate(googleToken){\n    console.log(\"authenticating\");\n    return app.authenticate({\n        strategy: \"google-token\",\n        access_token: googleToken\n    }).then((res) => {console.log(res); return res});\n}\n\nexport function createLocalServer(admin, topic){\n    app.authenticate().then(() => {\n        return app.service('local-server').create({\n            admin: admin,\n            topic: topic\n        });\n    });\n    \n}\n\nexport function createLock(local_server, topic, name){\n    return app.authenticate().then(() => {\n        return app.service('local-server').find({query: { topic: local_server}})\n        .then( (localServer) => {\n        \n            return app.service('lock').create({\n                local_server_id: localServer.data[0].id,\n                topic,\n                name\n            });\n        })\n\n    })\n}\n\nexport function deleteLock(local_server, topic){\n    return app.authenticate().then(() => {\n        return app.service('local-server').find({query: {topic: local_server}})\n        .then( (localServer) => {\n            return app.service('lock').remove(null, {query: {local_server_id: localServer.data[0].id, topic}});\n        });\n    }) \n}\n\nexport function getOTPs(){\n    return app.authenticate().then( (res) => {\n        const userID =  res.user.id;\n        return app.service('otp').find(\n            {\n                query: {\n                    granted_by_user: userID\n                }\n            }\n        );\n    });\n    \n    \n}\nexport function createOTP(email, lock){\n    const userID = localStorage.getItem(\"user\");\n    return app.service('otp').create({\n        reciever_email: email,\n        granted_by_user: userID,\n        lock_id: lock\n    });\n}\n\nexport function deleteOTP(id){\n    app.service('otp').patch(id, {status: 'inactive'});\n}\n\nexport function aproveOTP(id){\n    app.service('otp').patch(id, {status: 'active'});\n}\n\nexport function getKeys(){\n    return app.authenticate().then( (res) => {\n        const lockIds = res.user.locks.map(lock => lock.id);\n        return app.service('key').find({\n            query: {\n                lock_id: {\n                    $in: lockIds\n                }\n            }\n        });\n    });\n}\n\nexport function createKey(userId, lockId, imageUri, keyName){\n    return app.authenticate().then( () => {\n        return app.service('key').create({user_id: userId, lock_id: lockId, faceUri: imageUri, name: keyName});\n    })\n}\n\nexport function removeKey(id){\n    return app.authenticate().then((res) => {\n        return app.service('key').remove(id);\n    });\n}\n\n\n\nexport function getUser(){\n    const userID = localStorage.getItem(\"user\");\n    return app.authenticate().then(() => {return app.service('user').get(userID);})\n}\n\nexport function getUserName(id){\n    return app.service('user').get(id)\n}\n\nexport default app\n\n\n\n\n//export default app;","import { deleteLock } from './externalApi';\n\nconst feathers = require('@feathersjs/feathers');\nconst socketio = require('@feathersjs/socketio-client');\nconst io = require('socket.io-client');\nconst app = feathers();\nconst socketApp = feathers();\nconst socket = io('http://192.168.0.11:3032'); //direccion de la api\nconst auth = require('@feathersjs/authentication-client')\nconst rest = require('@feathersjs/rest-client');\nconst restClient = rest('http://192.168.0.11:3031')\n\napp.configure(restClient.fetch(window.fetch));\nsocketApp.configure(socketio(socket));\n\n\n\n\n\nexport function getMQTTInfo(){\n    \n    return app.service(\"mqtt-info\").get(1);\n}\n\nexport function getAdmin(){\n    \n    return app.service(\"admin-user\").get(1);\n}\n\nexport function setAdmin(adminMail){\n    return app.service(\"admin-user\").create({_id: \"1\", mail: adminMail})\n}\n\nexport function addDevice(device){\n    return app.service(\"devices\").create({name: device.name, topic: device.lockTopic, cam_topic: device.camTopic}).then((res)=> {console.log(res);})\n    \n}\n\nexport function getDevices(){\n    return app.service(\"devices\").find();\n}\n\nexport function pairDevices(cam, lock){\n    app.service(\"cam-lock-pair\").create({cam_topic: cam, lock_topic: lock});\n}\n\nexport function getPairs(){\n    return app.service(\"cam-lock-pair\").find();\n}\n\nexport function getCams(){\n    return app.service(\"devices\").find({query: {type: \"cam\"}});\n}\n\nexport function getLocks(){\n    return app.service(\"devices\").find({query:{ type: \"lock\"}});\n}\n\nexport function deletePair(id){\n    app.service(\"cam-lock-pair\").remove(id);\n}\n\nexport function deleteDevice(id){\n    return app.service(\"devices\").remove(id).then( (device) => {\n        if(device.type === 'lock'){\n            getMQTTInfo().then((devData) => {\n                deleteLock(devData.device_name, device.topic )\n            })\n        }\n    });\n}\n\nexport default socketApp;\n","import React, { Component } from 'react'\nimport {getMQTTInfo, getAdmin} from '../Api/localApi';\nimport app from '../Api/externalApi';\n\nexport default class Home extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      admin: undefined,\n      device_name: undefined\n    }\n  }\n  componentDidMount(){\n    app.authenticate()\n    Promise.resolve(getMQTTInfo()).then((devData) => {\n      this.setState({device_name: devData.device_name});\n    }).then( () => {\n      getAdmin().then( (adminInfo) => {\n        this.setState({admin: adminInfo.mail})\n      })\n    });\n\n    \n  }\n  render() {\n    const {device_name, admin} = this.state;\n    return (\n      <div>\n        Bienvenido al admin de {device_name} {admin}\n      </div>\n    )\n  }\n}\n\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {deleteDevice} from \"../Api/localApi\";\nimport { faLock, faVideo } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nconst styles = {\n  card: {\n    minWidth: 125,\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n};\n\nclass DeviceCard extends Component {\n  deleteClick = () => {\n    const { device } = this.props;\n    deleteDevice(device._id)\n  }\n  render(){  \n    const { classes, device, localname } = this.props;\n    \n    return (\n      <Card className={classes.card}>\n        <CardContent>\n          <Typography variant=\"h5\" component=\"h2\">\n            {device.name}\n          </Typography>\n          <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n          <FontAwesomeIcon icon={faVideo} /> {localname}/{device.cam_topic}\n          </Typography>\n          <Typography className={classes.pos} color=\"textSecondary\">\n          <FontAwesomeIcon icon={faLock} />{localname}/{device.lock_topic}\n          </Typography>\n        </CardContent>\n        <CardActions>\n          <Button size=\"small\" onClick={this.deleteClick}>Delete</Button>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nDeviceCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(DeviceCard);","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Modal from '@material-ui/core/Modal';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Divider from '@material-ui/core/Divider';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { addDevice } from '../Api/localApi';\n\nconst styles = theme => ({\n  card: {\n    minWidth: 275,\n    minHeight: 172\n  },\n  modalPaper: {\n    position: 'absolute',\n    width: theme.spacing.unit * 50,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing.unit * 4\n  },\n  button: {\n    left: \"42%\",\n    marginTop: \"15%\",\n  },\n  creteDeviceButton: {\n    margin: theme.spacing.unit,\n    left: \"80%\"\n  },\n  createDeviceSelect: {\n    margin: theme.spacing.unit,\n  }\n\n});\n\nfunction getModalStyle() {\n    const top = 50;\n    const left = 50;\n  \n    return {\n      top: `${top}%`,\n      left: `${left}%`,\n      transform: `translate(-${top}%, -${left}%)`,\n    };\n  }\n\nclass AddDeviceCard extends Component {\n    state = {\n        modal: false,\n        lockTopic: undefined,\n        camTopic: undefined,\n        accessName: undefined\n    };\n    handleOpen = () => { \n        this.setState({modal: true});\n    }\n\n    handleClose = () => {\n        this.setState({modal: false});\n    }\n\n    accessNameChange = (ev) => {\n        this.setState({accessName: ev.target.value});\n    }\n\n    camTopicChange = (ev) => {\n        this.setState({camTopic: ev.target.value});\n    }\n    lockTopicChange = (ev) => {\n        this.setState({lockTopic: ev.target.value});\n    }\n\n\n    createDevice = () => {\n        const { accessName,  lockTopic, camTopic } = this.state;\n        const device = {\n            name: accessName, \n            lockTopic: lockTopic,\n            camTopic: camTopic\n        };\n        addDevice(device);\n        this.setState({\n            modal: false,\n            name: \"\", \n            lockTopic: \"\",\n            camTopic: \"\"\n        });\n    }\n\n\n    render(){\n        const { classes } = this.props;\n        \n        return (   \n                <div>\n                    <Card className={classes.card}>\n                        <CardContent>\n                            <Typography variant=\"h5\" component=\"h2\">\n                                <Button\n                                variant=\"fab\"\n                                onClick={this.handleOpen} \n                                color=\"secondary\" \n                                aria-label=\"Add\"\n                                className={classes.button}\n                                >\n                                    <AddIcon />\n                                </Button>\n                                <br/>\n                            </Typography>\n                        </CardContent>\n                    </Card>\n                \n                    <Modal \n                    open={this.state.modal}\n                    onClose={this.handleClose} \n                    aria-labelledby=\"simple-modal-title\"\n                    aria-describedby=\"simple-modal-description\"\n                    >\n                        <div className={classes.modalPaper} style={getModalStyle()}>\n                            <Typography variant=\"h6\" id=\"modal-title\">\n                                Add an Access\n                            </Typography>\n                            <Divider/>\n                            <br/>\n                            <TextField \n                            label=\"Access Name\" \n                            onChange={this.accessNameChange} \n                            />\n                            <br/>\n                            <TextField \n                            label=\"Lock Topic\" \n                            onChange={this.lockTopicChange} \n                            />\n                            <br/>\n                            <TextField \n                            label=\"Cam Topic\" \n                            onChange={this.camTopicChange} \n                            />\n                            <br/>\n                            <Button \n                            className={classes.creteDeviceButton} \n                            color=\"primary\"\n                            onClick={this.createDevice}\n                            > \n                                Create\n                            </Button>\n                        </div>\n                    </Modal>\n                </div>\n        );\n    }\n}\nAddDeviceCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AddDeviceCard);","import React, { Component } from 'react'\nimport {getDevices, getPairs, getMQTTInfo} from '../Api/localApi';\nimport DeviceCard from \"./deviceCard\";\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport AddDeviceCard from \"./addDeviceCard\";\n\nimport Divider from '@material-ui/core/Divider';\nimport socketApp from '../Api/localApi';\n\nexport default class Access extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      devices: undefined,\n      pairs: undefined,\n      localname: undefined,\n    }\n  }\n  componentDidMount(){\n    Promise.resolve(getDevices()).then((devData) => {\n      this.setState({devices: devData.data});\n    })\n    Promise.resolve(getPairs()).then((PairData) => {\n      this.setState({pairs: PairData.data});\n    })\n\n    Promise.resolve(getMQTTInfo()).then((devData) => {\n      this.setState({localname: devData.device_name});\n    })\n\n    \n    socketApp.service('devices').on('created', (newDevice) => {\n      this.setState((prevState) => {\n        return {\n          devices: prevState.devices.concat(newDevice)\n        }\n      })\n    });\n    socketApp.service('devices').on('removed', (removedDevice) => {\n      this.setState((prevState) => {\n        const filtered = prevState.devices.filter(obj =>  obj._id !== removedDevice._id )\n        return {\n          devices: filtered\n        }\n      })\n    });\n\n    socketApp.service('cam-lock-pair').on('created', (newPair) => {\n      this.setState((prevState) => {\n        return {\n          pairs: prevState.pairs.concat(newPair)\n        }\n      })\n    });\n    socketApp.service('cam-lock-pair').on('removed', (removedPair) => {\n      this.setState((prevState) => {\n        const filtered = prevState.pairs.filter(obj =>  obj._id !== removedPair._id )\n        return {\n          pairs: filtered\n        }\n      })\n    });\n\n  }\n  render() {\n    const styles = {\n        gridList: {\n          width: 500,\n          height: 450\n        },\n        subheader: {\n          width: '100%',\n        },\n        addButtonGrid: {\n            alignContent: \"center\",\n            justifyContent: \"center\",\n            display: \"grid\"\n        }\n\n      };\n\n    return (\n      <div>\n          Access Devices\n          <br/>\n          <Divider/>\n          <br/>\n          <GridList className={styles.gridList} cols={3}>\n            <GridListTile>\n              <AddDeviceCard/>\n            </GridListTile>\n            {this.state.devices ? \n            this.state.devices.map((device) => {\n                return (\n                    <GridListTile key={device._id}>\n                        <DeviceCard\n                            device={device} \n                            localname={this.state.localname}\n                            />\n                    </GridListTile>\n                )\n            }) \n            : \n            null}\n          </GridList>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react'\nimport { GoogleLogin } from 'react-google-login';\nimport {getAdmin, setAdmin, getMQTTInfo} from \"../Api/localApi\";\nimport {authenticate, createLocalServer} from \"../Api/externalApi\";\nimport Typography from '@material-ui/core/Typography';\n\n\nexport default class Login extends Component {\n    \n    constructor(props){\n        super(props);\n        this.state = {\n            adminSet: false,\n            adminMail: undefined,\n        }\n    }\n\n    responseGoogle = (response) => {\n        console.log(response);\n    }\n\n    loginResponse = (response) => {\n        const userEmail = response.profileObj.email;\n        const {adminMail} = this.state;\n        if (userEmail === adminMail){\n            authenticate(response.Zi.access_token)\n            .then((res) => {\n                console.log(res);\n                localStorage.setItem('user', res.user.id)\n                window.location.href = \"/\";    \n            }).catch((e) => {console.log(e);});\n        }else{\n            alert(\"Usuario incorrecto.\")\n        }\n    }\n\n    firstLoginResponse = (response) => {\n        const adminMail = response.profileObj.email;\n        setAdmin(adminMail).then( () => {\n            console.log(\"adminSet\");\n            authenticate(response.Zi.access_token).then( (res) => {\n                console.log(\"authenticated\");\n                localStorage.setItem(\"user\", res.user.id);\n            }).then( () => {\n                getMQTTInfo().then( (devData) => {\n                    console.log(\"mqtt Info\");\n                    const user = localStorage.getItem('user');\n                    createLocalServer(user, devData.device_name).then( () => {\n                        window.location.href = \"/\";\n                    });\n                });\n            });\n        });\n    }\n\n    componentDidMount() {\n        Promise.resolve(getAdmin()).then((adminInfo) => {\n            this.setState({\n                adminSet: true,\n                adminMail: adminInfo.mail\n            });\n            console.log(adminInfo);\n        }).catch( (e) => {\n            console.log(e);\n        });\n    }\n\n    render() {\n        const {adminSet, adminMail} = this.state;\n        const firstUse = !adminSet ? (\n            \n            <Typography align={\"center\"} variant=\"body1\">\n                This login will set the account as\n                 admin and will be the only account with access to\n                  this site\n                <Typography align={\"center\"} variant=\"caption\">\n                    if you don't have an account you can create it <a href=\"http://localhost:3030/\">here.</a>\n                </Typography>\n            </Typography>\n            \n        ) : null;\n        const adminInfo = adminMail ? (\n            <Typography align={\"center\"} variant=\"body1\">\n                {\"Only the device admin (\" + adminMail + \") has access to this page, please login with this account to continue.\"}\n            </Typography>\n        ) : null;\n        return (\n            <div style={{\n                marginTop: '10%'\n            }}>\n                \n                <div style={{\n                    marginLeft: \"40%\",\n                    marginBottom: \"3px\"\n                }}>\n                    <GoogleLogin\n                        clientId=\"744835113496-qtb63bvfeiq2g6b9ogal9rrc9p65m9oq.apps.googleusercontent.com\"\n                        buttonText=\"Login\"\n                        \n                        onSuccess={!adminSet ? this.firstLoginResponse : this.loginResponse}\n                        onFailure={this.responseGoogle}\n                    />\n                </div>\n                {firstUse || adminInfo}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Modal from '@material-ui/core/Modal';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Divider from '@material-ui/core/Divider';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { createOTP, getUser } from '../Api/externalApi';\n\nconst styles = theme => ({\n  card: {\n    minWidth: 275,\n    minHeight: 172\n  },\n  modalPaper: {\n    position: 'absolute',\n    width: theme.spacing.unit * 50,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing.unit * 4\n  },\n  button: {\n    left: \"42%\",\n    marginTop: \"15%\",\n  },\n  creteDeviceButton: {\n    margin: theme.spacing.unit,\n    left: \"80%\"\n  },\n  createDeviceSelect: {\n    margin: theme.spacing.unit,\n  }\n\n});\n\nfunction getModalStyle() {\n    const top = 50;\n    const left = 50;\n  \n    return {\n      top: `${top}%`,\n      left: `${left}%`,\n      transform: `translate(-${top}%, -${left}%)`,\n    };\n  }\n\nclass AddOtpCard extends Component {\n    state = {\n        modal: false,\n        recieverEmail: \"\",\n        locks: undefined,\n        currentLock: 0\n    };\n\n    componentDidMount(){\n        getUser().then((user) => {\n            this.setState({locks: user.locks});\n            console.log(user.locks);\n        });\n    }\n    handleOpen = () => { \n        this.setState({modal: true});\n    }\n\n    handleClose = () => {\n        this.setState({modal: false});\n    }\n\n    emailChange = (ev) => {\n        this.setState({recieverEmail: ev.target.value});\n    }\n\n    lockChange = (ev) => {\n        this.setState({currentLock: ev.target.value})\n    }\n\n    createOtp = () => {\n        const { recieverEmail, currentLock } = this.state;\n        createOTP(recieverEmail, currentLock);\n        this.setState({\n            modal: false,\n            recieverEmail: \"\"\n        });\n    }\n\n\n    render(){\n        const { classes } = this.props;\n        const locksOptions = this.state.locks ? this.state.locks.map((lock) => {\n            return <MenuItem key={lock.id} value={lock.id}>{lock.name}</MenuItem>\n        }): null;\n        return (   \n                <div>\n                    <Card className={classes.card}>\n                        <CardContent>\n                            <Typography variant=\"h5\" component=\"h2\">\n                                <Button\n                                variant=\"fab\"\n                                onClick={this.handleOpen} \n                                color=\"secondary\" \n                                aria-label=\"Add\"\n                                className={classes.button}\n                                >\n                                    <AddIcon />\n                                </Button>\n                                <br/>\n                            </Typography>\n                        </CardContent>\n                    </Card>\n                \n                    <Modal \n                    open={this.state.modal}\n                    onClose={this.handleClose} \n                    aria-labelledby=\"simple-modal-title\"\n                    aria-describedby=\"simple-modal-description\"\n                    >\n                        <div className={classes.modalPaper} style={getModalStyle()}>\n                            <Typography variant=\"h6\" id=\"modal-title\">\n                                create an OTP QR Code\n                            </Typography>\n                            <Divider/>\n                            <br/>\n                            <TextField \n                            label=\"email\" \n                            onChange={this.emailChange} \n                            />\n                            <br/>\n                            <InputLabel htmlFor=\"dev-sel\">Locks</InputLabel>\n                            <Select\n                            className={classes.createDeviceSelect}\n                            onChange={this.lockChange}\n                            value={this.state.currentLock}\n                            inputProps={{\n                                name: \"device-type\",\n                                id: \"dev-sel\"\n                            }}\n                            ><MenuItem value={0} disabled>\n                            Locks\n                            </MenuItem>\n                            {locksOptions}\n                            </Select>\n                            <br/>\n                            <Button \n                            className={classes.creteDeviceButton} \n                            color=\"primary\"\n                            onClick={this.createOtp}\n                            > \n                                Create\n                            </Button>\n                        </div>\n                    </Modal>\n                </div>\n        );\n    }\n}\nAddOtpCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AddOtpCard);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {deleteOTP, aproveOTP, getUserName} from \"../Api/externalApi\";\n\nconst styles = {\n  card: {\n    minWidth: 125,\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n};\n\nclass OTPCard extends Component {\n\n    constructor(props){\n        super(props);\n        this.state={\n            userName: undefined\n        }\n    }\n\n    deleteClick = () => {\n        const { otp } = this.props;\n        deleteOTP(otp.id);\n    }\n    aproveClick = () => {\n        const {otp} = this.props;\n        aproveOTP(otp.id);\n    }\n\n    componentDidMount(){\n        getUserName(this.props.otp.user_id).then((user) => {\n            this.setState({userName: user.name});\n        })\n    }\n\n    componentDidUpdate(prevProps){\n        if (prevProps.otp.user_id !== this.props.otp.user_id){\n            getUserName(this.props.otp.user_id).then((user) => {\n                this.setState({userName: user.name});\n            })\n        }\n        \n    }\n\n    render(){  \n        const { classes, otp } = this.props;\n        const accountText = otp.user_id ? this.state.userName : \"No linked Account\";\n        return (\n        <Card className={classes.card}>\n            <CardContent>\n            <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n                {otp.status}\n            </Typography>\n            <Typography variant=\"h5\" component=\"h2\">\n                {otp.reciever_email}\n            </Typography>\n            \n            <Typography className={classes.pos} color=\"textSecondary\">\n                {accountText}\n            </Typography>\n        \n            </CardContent>\n            <CardActions>\n            <Button size=\"small\" onClick={this.deleteClick}>Delete</Button>\n            {(otp.user_id && (otp.status === 'aproval pending')) ? (<Button size=\"small\" onClick={this.aproveClick}>Aprove</Button>) : null}\n            </CardActions>\n        </Card>\n        );\n    }\n}\n\nOTPCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(OTPCard);\n","import React, { Component } from 'react'\nimport {getOTPs} from '../Api/externalApi';\nimport app from '../Api/externalApi';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport Divider from '@material-ui/core/Divider';\nimport AddOtpCard from \"./addOTPCard\";\nimport OTPCard from \"./OTPCard\";\n\nfunction compare(a,b) {\n  if (a.id < b.id)\n    return -1;\n  if (a.id > b.id)\n    return 1;\n  return 0;\n}\n\n\n\nexport default class OTP extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n        otpList: []\n    }\n  }\n  componentDidMount(){\n    Promise.resolve(getOTPs()).then((otpData) => {\n      this.setState({otpList: otpData.data});\n    });    \n    app.service('otp').on('created', (newOtp) => {\n      this.setState((prevState) => {\n        return {\n          otpList: prevState.otpList.concat(newOtp)\n        }\n      })\n    });\n    app.service('otp').on('patched', (patchedOtp) => {\n      this.setState((prevState) => {\n        if(patchedOtp.status === 'inactive'){\n          const filtered = prevState.otpList.filter(obj =>  obj.id !== patchedOtp.id )\n        return {\n          otpList: filtered\n        }\n        }\n        return {\n          otpList: prevState.otpList.map(obj => patchedOtp.id === obj.id ? patchedOtp : obj)\n        }\n      })\n    });\n  }\n  render() {\n    const styles = {\n        gridList: {\n          width: 500,\n          height: 450\n        },\n        subheader: {\n          width: '100%',\n        },\n        addButtonGrid: {\n            alignContent: \"center\",\n            justifyContent: \"center\",\n            display: \"grid\"\n        }\n\n      };\n\n    return (\n      <div>\n          One-Time-Passwords QR Codes\n          <br/>\n          <Divider/>\n          <br/>\n          <GridList className={styles.gridList} cols={3}>\n            <GridListTile>\n            <AddOtpCard/>\n            </GridListTile>\n            {this.state.otpList ? \n            this.state.otpList.map((otp) => {\n              return otp ? (\n                <GridListTile key={otp.id}>\n                  <OTPCard otp={otp}/>\n                </GridListTile>\n              ) : null\n            }):\n            null\n            }\n          </GridList>\n      </div>\n    )\n  }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport deburr from 'lodash/deburr';\nimport Autosuggest from 'react-autosuggest';\nimport match from 'autosuggest-highlight/match';\nimport parse from 'autosuggest-highlight/parse';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popper from '@material-ui/core/Popper';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n\n\nfunction renderInputComponent(inputProps) {\n  const { classes, inputRef = () => {}, ref, ...other } = inputProps;\n\n  return (\n    <TextField\n      fullWidth\n      InputProps={{\n        inputRef: node => {\n          ref(node);\n          inputRef(node);\n        },\n        classes: {\n          input: classes.input,\n        },\n      }}\n      {...other}\n    />\n  );\n}\n\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\n  const matches = match(suggestion.email, query);\n  const parts = parse(suggestion.email, matches);\n\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\">\n      <div>\n        {parts.map((part, index) => {\n          return part.highlight ? (\n            <span key={String(index)} style={{ fontWeight: 500 }}>\n              {part.text}\n            </span>\n          ) : (\n            <strong key={String(index)} style={{ fontWeight: 300 }}>\n              {part.text}\n            </strong>\n          );\n        })}\n      </div>\n    </MenuItem>\n  );\n}\n\nfunction getSuggestions(value, suggestions) {\n  const inputValue = deburr(value.trim()).toLowerCase();\n  const inputLength = inputValue.length;\n  let count = 0;\n\n  return inputLength === 0\n    ? []\n    : suggestions.filter(suggestion => {\n        const keep =\n          count < 5 && suggestion.email.slice(0, inputLength).toLowerCase() === inputValue;\n\n        if (keep) {\n          count += 1;\n        }\n\n        return keep;\n      });\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.email;\n}\n\nconst styles = theme => ({\n  root: {\n    height: 60,\n    flexGrow: 1,\n  },\n  container: {\n    position: 'relative',\n  },\n  suggestionsContainerOpen: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing.unit,\n    left: 0,\n    right: 0,\n  },\n  suggestion: {\n    display: 'block',\n  },\n  suggestionsList: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none',\n  },\n  divider: {\n    height: theme.spacing.unit * 2,\n  },\n});\n\nclass IntegrationAutosuggest extends React.Component {\n  state = {\n    single: '',\n    popper: '',\n    suggestions: [],\n  };\n\n  handleSuggestionsFetchRequested = ({ value }) => {\n    \n    this.setState({\n      suggestions: getSuggestions(value, this.props.suggestions),\n    });\n  };\n\n  handleSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n    });\n  };\n\n  handleChange = name => (event, { newValue }) => {\n    this.setState({\n      [name]: newValue,\n    });\n  };\n\n  render() {\n    const { classes } = this.props;\n\n    const autosuggestProps = {\n      renderInputComponent,\n      suggestions: this.state.suggestions,\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n      getSuggestionValue,\n      renderSuggestion,\n    };\n\n    return (\n      <div className={classes.root}>\n        <Autosuggest\n          {...autosuggestProps}\n          inputProps={{\n            classes,\n            placeholder: this.props.placeholder,\n            value: this.props.value,\n            onChange: this.props.onChange,\n          }}\n          theme={{\n            container: classes.container,\n            suggestionsContainerOpen: classes.suggestionsContainerOpen,\n            suggestionsList: classes.suggestionsList,\n            suggestion: classes.suggestion,\n          }}\n          renderSuggestionsContainer={options => (\n            <Paper {...options.containerProps} square>\n              {options.children}\n            </Paper>\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nIntegrationAutosuggest.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(IntegrationAutosuggest);","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Modal from '@material-ui/core/Modal';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Divider from '@material-ui/core/Divider';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport ImageUploader from 'react-images-upload';\nimport { createKey, getUser } from '../Api/externalApi';\nimport app from '../Api/externalApi';\nimport AutosuggestSelect from \"./autoSuggest\";\n\nconst styles = theme => ({\n  card: {\n    minWidth: 275,\n    minHeight: 172\n  },\n  modalPaper: {\n    position: 'absolute',\n    width: theme.spacing.unit * 50,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing.unit * 4\n  },\n  button: {\n    left: \"42%\",\n    marginTop: \"15%\",\n  },\n  creteDeviceButton: {\n    margin: theme.spacing.unit,\n    left: \"80%\"\n  },\n  createDeviceSelect: {\n    margin: theme.spacing.unit,\n  }\n\n});\n\nfunction getModalStyle() {\n    const top = 50;\n    const left = 50;\n  \n    return {\n      top: `${top}%`,\n      left: `${left}%`,\n      transform: `translate(-${top}%, -${left}%)`,\n    };\n  }\n\nclass AddKeyCard extends Component {\n    state = {\n        modal: false,\n        userId: undefined,\n        locks: undefined,\n        currentLock: 0,\n        suggestions: [],\n        imageUri: undefined,\n        userEmail: '',\n        keyName: ''\n    };\n\n    componentDidMount(){\n\n        getUser().then((user) => {\n            this.setState({locks: user.locks});\n            \n        }).then(() => {\n            app.service('user').find({query: {$select: ['id', 'email']}}).then( (res) => {\n                \n                this.setState({suggestions: res.data})\n            })\n        });\n    }\n    handleOpen = () => { \n        this.setState({modal: true});\n    }\n\n    handleClose = () => {\n        this.setState({modal: false});\n    }\n\n    emailChange = (event, {newValue}) => {\n        \n        \n        const userArray = this.state.suggestions.filter(suggestion => suggestion.email === newValue)\n        const userObject = userArray[0] ? userArray[0] : [];\n        console.log(userObject); \n        this.setState({userId: userObject.id, userEmail: newValue});\n    }\n\n    lockChange = (ev) => {\n        this.setState({currentLock: ev.target.value})\n    }\n\n    lockChange = (ev) => {\n        this.setState({currentLock: ev.target.value})\n    }\n\n    nameChange = (ev) => {\n        this.setState({keyName: ev.target.value})\n    }\n\n    createKey = () => {\n        const {userId, currentLock, imageUri, keyName} = this.state\n        createKey(userId, currentLock, imageUri, keyName).then(() => {\n            this.setState({\n                modal: false,\n                userEmail: \"\"\n            });\n        })\n    }\n\n    onDrop = ( pictureFile, pictureDataURLs) => {\n        console.log(pictureDataURLs)\n        this.setState({imageUri: pictureDataURLs[0]});\n    }\n\n\n    render(){\n        const { classes } = this.props;\n        const locksOptions = this.state.locks ? this.state.locks.map((lock) => {\n            return <MenuItem key={lock.id} value={lock.id}>{lock.name}</MenuItem>\n        }): null;\n        \n        return (   \n                <div>\n                    <Card className={classes.card}>\n                        <CardContent>\n                            <Typography variant=\"h5\" component=\"h2\">\n                                <Button\n                                variant=\"fab\"\n                                onClick={this.handleOpen} \n                                color=\"secondary\" \n                                aria-label=\"Add\"\n                                className={classes.button}\n                                >\n                                    <AddIcon />\n                                </Button>\n                                <br/>\n                            </Typography>\n                        </CardContent>\n                    </Card>\n                \n                    <Modal \n                    open={this.state.modal}\n                    onClose={this.handleClose} \n                    aria-labelledby=\"simple-modal-title\"\n                    aria-describedby=\"simple-modal-description\"\n                    >\n                        <div className={classes.modalPaper} style={getModalStyle()}>\n                            <Typography variant=\"h6\" id=\"modal-title\">\n                                Create a new key.\n                            </Typography>\n                            <Divider/>\n                            <br/>\n                            <TextField \n                            label=\"key name\" \n                            onChange={this.nameChange} \n                            />\n                            <br/>\n                            <AutosuggestSelect\n                                onChange={this.emailChange}\n                                suggestions={this.state.suggestions}\n                                value={this.state.userEmail}\n                                placeholder='Search Users by email'\n                            />\n                            <br/>\n                            <InputLabel htmlFor=\"dev-sel\">Locks</InputLabel>\n                            <Select\n                                className={classes.createDeviceSelect}\n                                onChange={this.lockChange}\n                                value={this.state.currentLock}\n                                inputProps={{\n                                    name: \"device-type\",\n                                    id: \"dev-sel\"\n                                }}\n                            >\n                                <MenuItem value={0} disabled>\n                                    Locks\n                                </MenuItem>\n                                {locksOptions}\n                            </Select>\n                            <br/>\n                            <ImageUploader\n                                withIcon={true}\n                                buttonText='Choose images'\n                                onChange={this.onDrop}\n                                imgExtension={['.jpg', '.png', '.jpeg']}\n                                maxFileSize={5242880}\n                            />\n                            <Button \n                            className={classes.creteDeviceButton} \n                            color=\"primary\"\n                            onClick={this.createKey}\n                            > \n                                Create\n                            </Button>\n                        </div>\n                    </Modal>\n                </div>\n        );\n    }\n}\nAddKeyCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AddKeyCard);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport {removeKey, getUserName} from \"../Api/externalApi\";\nimport app from \"../Api/externalApi\";\n\nconst styles = {\n  card: {\n    minWidth: 125,\n    minHeight: 172\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  row: {\n    display: 'flex',\n    justifyContent: 'center',\n    minWidth: 125,\n  },\n  avatar: {\n    width: 80,\n    height: 80,\n    marginRight: 25,\n  }\n};\n\nclass KeyCard extends Component {\n\n    constructor(props){\n        super(props);\n        this.state={\n            avatarUri: null,\n            userName: undefined\n        }\n    }\n\n    deleteClick = () => {\n        const { cardKey } = this.props;\n        removeKey(cardKey.id);\n    }\n\n    async componentDidMount(){\n        getUserName(this.props.cardKey.user_id).then((user) => {\n            this.setState({userName: user.name});\n        })\n        console.log(this.props.cardKey.image_path);\n        await app.service('uploads').get(this.props.cardKey.image_path).then( (res) => {\n            console.log(res);\n            this.setState({avatarUri: res.uri})\n        })\n    }\n\n\n    render(){  \n        const { classes, cardKey } = this.props;\n        const {avatarUri} = this.state;\n        const accountText = cardKey.user_id ? this.state.userName : \"No linked Account\";\n        console.log(avatarUri);\n        return (\n        <Card className={classes.card}>\n            <CardContent className={classes.row}>\n                <Avatar className={classes.avatar} src={avatarUri || null}/>\n                    <Typography variant=\"h5\" component=\"h2\">\n                        {cardKey.name}\n                        <Typography className={classes.pos} color=\"textSecondary\">\n                            {accountText}\n                        </Typography>\n                    </Typography>\n            </CardContent>\n            <CardActions>\n                <Button size=\"small\" onClick={this.deleteClick}>Delete</Button>\n            </CardActions>\n        </Card>\n        );\n    }\n}\n\nKeyCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(KeyCard);\n","import React, { Component } from 'react'\nimport {getKeys} from '../Api/externalApi';\nimport app from '../Api/externalApi';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport Divider from '@material-ui/core/Divider';\nimport AddKeyCard from \"./addKeyCard\";\nimport KeyCard from \"./keyCard\";\n\n\nexport default class Key extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n        keyList: []\n    }\n  }\n  componentDidMount(){\n    Promise.resolve(getKeys()).then((keyData) => {\n      this.setState({keyList: keyData.data});\n    });    \n    app.service('key').on('created', (newKey) => {\n      this.setState((prevState) => {\n        return {\n          keyList: prevState.keyList.concat(newKey)\n        }\n      })\n    });\n    app.service('key').on('removed', (removedKey) => {\n      this.setState((prevState) => {\n        const filtered = prevState.keyList.filter(obj =>  obj.id !== removedKey.id )\n        return {\n          keyList: filtered\n        }\n      });\n    });\n  }\n  render() {\n    const styles = {\n        gridList: {\n          width: 500,\n          height: 450\n        },\n        subheader: {\n          width: '100%',\n        },\n        addButtonGrid: {\n            alignContent: \"center\",\n            justifyContent: \"center\",\n            display: \"grid\"\n        }\n\n      };\n\n    return (\n      <div>\n          Keys\n          <br/>\n          <Divider/>\n          <br/>\n          <GridList className={styles.gridList} cols={3}>\n            <GridListTile>\n                <AddKeyCard/>\n            </GridListTile>\n            {this.state.keyList ? \n            this.state.keyList.map((key) => {\n              return key ? (\n                <GridListTile key={key.id}>\n                  <KeyCard cardKey={key}/>\n                </GridListTile>\n              ) : null\n            }):\n            null\n            }\n          </GridList>\n      </div>\n    )\n  }\n}","import React from 'react';\nimport {Redirect, Route} from \"react-router-dom\";\n\nexport const PrivateRoute = ({component: Component, ...rest}) => (\n    <Route\n        {...rest}\n        render={(props) => \n            localStorage.getItem(\"feathers-jwt\") ? (\n                <Component {...props} />\n            ) : (\n                <Redirect to={{\n                    pathname: \"/login\",\n                    state: {from : props.location} \n                    }}\n                />\n            )\n        }\n    />\n);\n","import React from 'react';\nimport {Route, Switch} from \"react-router-dom\";\nimport Home from \"../Home\";\nimport Access from \"../Access\";\nimport Login from \"../Login\";\nimport OTP from '../OTP';\nimport Keys from '../Keys';\n\nimport {PrivateRoute} from \"./PrivateRoute\";\n\nexport const routes = (\n    <Switch>\n        <Route exact path=\"/login\" component={Login} />\n        <PrivateRoute exact path=\"/\" component={Home} />\n        <PrivateRoute exact path=\"/access\" component={Access} />\n        <PrivateRoute exact path=\"/OTP\" component={OTP} />\n        <PrivateRoute exact path=\"/keys\" component={Keys} />\n    </Switch>\n)\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport {sidebarItems} from './sidebarItems';\nimport { routes } from \"../Routes\";\nimport Avatar from '@material-ui/core/Avatar';\n\nconst drawerWidth = 260;\n\nconst styles = theme => ({\n    root: {\n        flexGrow: 1,\n        zIndex: 1,\n        overflow: 'hidden',\n        position: 'relative',\n        display: 'flex',\n        minHeight: '600px'\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1\n    },\n    drawerPaper: {\n        position: 'relative',\n        width: drawerWidth\n    },\n    content: {\n        flexGrow: 1,\n        background: theme.palette.background.default,\n        padding: theme.spacing.unit * 3,\n        minWidth: 0,\n        paddingTop: theme.spacing.unit * 10,\n    },\n    toolbar: theme.mixins.toolbar,\n});\n\nfunction Sidebar(props){\n    const {classes} = props;\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"absolute\" className={classes.appBar}>\n                <Toolbar>\n                    <Avatar src=\"/logo.png\"/>\n                    <Typography variant=\"title\" color=\"inherit\" noWrap>\n                        Pingüilock\n                    </Typography>\n                </Toolbar>\n            </AppBar>\n            <Drawer \n                variant=\"permanent\" \n                classes={{\n                    paper: classes.drawerPaper,\n                }}\n            >\n            <div className={classes.toolbar} />\n            <List>{sidebarItems}</List>\n            </Drawer>\n            <main className={classes.content} >\n                <div>\n                    {routes}\n                </div>\n            </main>\n        </div>\n    );\n}\nSidebar.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Sidebar);","import React, { Component } from 'react';\nimport Sidebar from \"./components/Sidebar\";\nimport './App.css';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport app from './components/Api/externalApi';\n\nclass App extends Component {\n\n  componentDidMount(){\n    if(localStorage.getItem('feathers-jwt')){\n      app.authenticate();\n    }\n  }\n\n  render() {\n    const theme = createMuiTheme({\n      palette: {\n        primary: {\n          main: \"#212121\"\n        },\n        secondary: {\n          main: \"#ff5722\"\n        }\n      },\n    });\n\n    return (\n      <div>\n        <MuiThemeProvider theme={theme}>\n          <Sidebar/>\n        </MuiThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render((\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>\n), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}