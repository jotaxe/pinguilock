(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{253:function(e,t,a){e.exports=a(508)},258:function(e,t,a){},376:function(e,t){},506:function(e,t,a){},508:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(24),r=a.n(i),o=(a(258),a(13)),l=a(14),s=a(16),u=a(15),m=a(17),d=a(10),h=a(91),p=a.n(h),v=a(89),g=a.n(v),f=a(90),E=a.n(f),b=a(65),k=a.n(b),y=a(9),O=a.n(y),S=a(513),C=a(43),j=a.n(C),w=a(52),N=a.n(w),L=a(66),_=a(45),x=a(46),T=c.a.createElement("div",null,c.a.createElement(S.a,{to:"/"},c.a.createElement(j.a,{button:!0},c.a.createElement(L.a,null,c.a.createElement(_.a,{icon:x.b})),c.a.createElement(N.a,{primary:"Home"}))),c.a.createElement(S.a,{to:"/access"},c.a.createElement(j.a,{button:!0},c.a.createElement(L.a,null,c.a.createElement(_.a,{icon:x.a})),c.a.createElement(N.a,{primary:"Manage Access"}))),c.a.createElement(S.a,{to:"/keys"},c.a.createElement(j.a,{button:!0},c.a.createElement(L.a,null,c.a.createElement(_.a,{icon:x.c})),c.a.createElement(N.a,{primary:"Manage Keys"}))),c.a.createElement(S.a,{to:"/OTP"},c.a.createElement(j.a,{button:!0},c.a.createElement(L.a,null,c.a.createElement(_.a,{icon:x.e})),c.a.createElement(N.a,{primary:"Manage QR Codes"})))),D=a(512),P=a(509),I=a(146),M=a(150),q=a(151),B=I(),R=q("http://192.168.0.11:3030"),A=a(164);a(165)("http://192.168.0.11:3030");function W(e){return console.log("authenticating"),B.authenticate({strategy:"google-token",access_token:e}).then(function(e){return console.log(e),e})}function z(){var e=localStorage.getItem("user");return B.authenticate().then(function(){return B.service("user").get(e)})}function K(e){return B.service("user").get(e)}B.configure(M(R)),B.configure(A({storage:window.localStorage}));var U=B,F=a(146),H=a(150),G=a(151),Q=F(),V=F(),$=G("http://localhost:3032"),J=(a(164),a(165)("http://localhost:3031"));function Z(){return Q.service("mqtt-info").get(1)}function X(){return Q.service("admin-user").get(1)}function Y(e){return Q.service("devices").remove(e).then(function(e){"lock"===e.type&&Z().then(function(t){var a,n;a=t.device_name,n=e.topic,B.authenticate().then(function(){return B.service("local-server").find({query:{topic:a}}).then(function(e){return B.service("lock").remove(null,{query:{local_server_id:e.data[0].id,topic:n}})})})})})}Q.configure(J.fetch(window.fetch)),V.configure(H($));var ee=V,te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={admin:void 0,device_name:void 0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;U.authenticate(),Promise.resolve(Z()).then(function(t){e.setState({device_name:t.device_name})}).then(function(){X().then(function(t){e.setState({admin:t.mail})})})}},{key:"render",value:function(){var e=this.state,t=e.device_name,a=e.admin;return c.a.createElement("div",null,"Bienvenido al admin de ",t," ",a)}}]),t}(n.Component),ae=a(26),ne=a.n(ae),ce=a(41),ie=a.n(ce),re=a(27),oe=a.n(re),le=a(21),se=a.n(le),ue=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).deleteClick=function(){Y(a.props.device._id)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.device,n=e.localname;return c.a.createElement(ne.a,{className:t.card},c.a.createElement(oe.a,null,c.a.createElement(O.a,{variant:"h5",component:"h2"},a.name),c.a.createElement(O.a,{className:t.title,color:"textSecondary",gutterBottom:!0},c.a.createElement(_.a,{icon:x.f})," ",n,"/",a.cam_topic),c.a.createElement(O.a,{className:t.pos,color:"textSecondary"},c.a.createElement(_.a,{icon:x.d}),n,"/",a.lock_topic)),c.a.createElement(ie.a,null,c.a.createElement(se.a,{size:"small",onClick:this.deleteClick},"Delete")))}}]),t}(n.Component),me=Object(d.withStyles)({card:{minWidth:125},title:{fontSize:14},pos:{marginBottom:12}})(ue),de=a(42),he=a.n(de),pe=a(34),ve=a.n(pe),ge=a(32),fe=a.n(ge),Ee=a(60),be=a.n(Ee),ke=a(29),ye=a.n(ke),Oe=a(28),Se=a.n(Oe);var Ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={modal:!1,lockTopic:void 0,camTopic:void 0,accessName:void 0},a.handleOpen=function(){a.setState({modal:!0})},a.handleClose=function(){a.setState({modal:!1})},a.accessNameChange=function(e){a.setState({accessName:e.target.value})},a.camTopicChange=function(e){a.setState({camTopic:e.target.value})},a.lockTopicChange=function(e){a.setState({lockTopic:e.target.value})},a.createDevice=function(){var e=a.state;!function(e){Q.service("devices").create({name:e.name,topic:e.lockTopic,cam_topic:e.camTopic}).then(function(e){console.log(e)})}({name:e.accessName,lockTopic:e.lockTopic,camTopic:e.camTopic}),a.setState({modal:!1,name:"",lockTopic:"",camTopic:""})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("div",null,c.a.createElement(ne.a,{className:e.card},c.a.createElement(oe.a,null,c.a.createElement(O.a,{variant:"h5",component:"h2"},c.a.createElement(se.a,{variant:"fab",onClick:this.handleOpen,color:"secondary","aria-label":"Add",className:e.button},c.a.createElement(be.a,null)),c.a.createElement("br",null)))),c.a.createElement(fe.a,{open:this.state.modal,onClose:this.handleClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},c.a.createElement("div",{className:e.modalPaper,style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},c.a.createElement(O.a,{variant:"h6",id:"modal-title"},"Add an Access"),c.a.createElement(Se.a,null),c.a.createElement("br",null),c.a.createElement(ye.a,{label:"Access Name",onChange:this.accessNameChange}),c.a.createElement("br",null),c.a.createElement(ye.a,{label:"Lock Topic",onChange:this.lockTopicChange}),c.a.createElement("br",null),c.a.createElement(ye.a,{label:"Cam Topic",onChange:this.camTopicChange}),c.a.createElement("br",null),c.a.createElement(se.a,{className:e.creteDeviceButton,color:"primary",onClick:this.createDevice},"Create"))))}}]),t}(n.Component),je=Object(d.withStyles)(function(e){return{card:{minWidth:275,minHeight:172},modalPaper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit},button:{left:"42%",marginTop:"15%"},creteDeviceButton:{margin:e.spacing.unit,left:"80%"},createDeviceSelect:{margin:e.spacing.unit}}})(Ce),we=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={devices:void 0,pairs:void 0,localname:void 0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve(Q.service("devices").find()).then(function(t){e.setState({devices:t.data})}),Promise.resolve(Q.service("cam-lock-pair").find()).then(function(t){e.setState({pairs:t.data})}),Promise.resolve(Z()).then(function(t){e.setState({localname:t.device_name})}),ee.service("devices").on("created",function(t){e.setState(function(e){return{devices:e.devices.concat(t)}})}),ee.service("devices").on("removed",function(t){e.setState(function(e){return{devices:e.devices.filter(function(e){return e._id!==t._id})}})}),ee.service("cam-lock-pair").on("created",function(t){e.setState(function(e){return{pairs:e.pairs.concat(t)}})}),ee.service("cam-lock-pair").on("removed",function(t){e.setState(function(e){return{pairs:e.pairs.filter(function(e){return e._id!==t._id})}})})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,"Access Devices",c.a.createElement("br",null),c.a.createElement(Se.a,null),c.a.createElement("br",null),c.a.createElement(he.a,{className:{width:500,height:450},cols:3},c.a.createElement(ve.a,null,c.a.createElement(je,null)),this.state.devices?this.state.devices.map(function(t){return c.a.createElement(ve.a,{key:t._id},c.a.createElement(me,{device:t,localname:e.state.localname}))}):null))}}]),t}(n.Component),Ne=a(181),Le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).responseGoogle=function(e){console.log(e)},a.loginResponse=function(e){e.profileObj.email===a.state.adminMail?W(e.Zi.access_token).then(function(e){console.log(e),localStorage.setItem("user",e.user.id),window.location.href="/"}).catch(function(e){console.log(e)}):alert("Usuario incorrecto.")},a.firstLoginResponse=function(e){(function(e){return Q.service("admin-user").create({_id:"1",mail:e})})(e.profileObj.email).then(function(){console.log("adminSet"),W(e.Zi.access_token).then(function(e){console.log("authenticated"),localStorage.setItem("user",e.user.id)}).then(function(){Z().then(function(e){console.log("mqtt Info");var t,a,n=localStorage.getItem("user");(t=n,a=e.device_name,void B.authenticate().then(function(){return B.service("local-server").create({admin:t,topic:a})})).then(function(){window.location.href="/"})})})})},a.state={adminSet:!1,adminMail:void 0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve(X()).then(function(t){e.setState({adminSet:!0,adminMail:t.mail}),console.log(t)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.adminSet,a=e.adminMail,n=t?null:c.a.createElement(O.a,{align:"center",variant:"body1"},"This login will set the account as admin and will be the only account with access to this site",c.a.createElement(O.a,{align:"center",variant:"caption"},"if you don't have an account you can create it ",c.a.createElement("a",{href:"http://localhost:3030/"},"here."))),i=a?c.a.createElement(O.a,{align:"center",variant:"body1"},"Only the device admin ("+a+") has access to this page, please login with this account to continue."):null;return c.a.createElement("div",{style:{marginTop:"10%"}},c.a.createElement("div",{style:{marginLeft:"40%",marginBottom:"3px"}},c.a.createElement(Ne.GoogleLogin,{clientId:"744835113496-qtb63bvfeiq2g6b9ogal9rrc9p65m9oq.apps.googleusercontent.com",buttonText:"Login",onSuccess:t?this.loginResponse:this.firstLoginResponse,onFailure:this.responseGoogle})),n||i)}}]),t}(n.Component),_e=a(40),xe=a.n(_e),Te=a(33),De=a.n(Te),Pe=a(39),Ie=a.n(Pe);var Me=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={modal:!1,recieverEmail:"",locks:void 0,currentLock:0},a.handleOpen=function(){a.setState({modal:!0})},a.handleClose=function(){a.setState({modal:!1})},a.emailChange=function(e){a.setState({recieverEmail:e.target.value})},a.lockChange=function(e){a.setState({currentLock:e.target.value})},a.createOtp=function(){var e,t,n,c=a.state,i=c.recieverEmail,r=c.currentLock;e=i,t=r,n=localStorage.getItem("user"),B.service("otp").create({reciever_email:e,granted_by_user:n,lock_id:t}),a.setState({modal:!1,recieverEmail:""})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;z().then(function(t){e.setState({locks:t.locks}),console.log(t.locks)})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.locks?this.state.locks.map(function(e){return c.a.createElement(De.a,{key:e.id,value:e.id},e.name)}):null;return c.a.createElement("div",null,c.a.createElement(ne.a,{className:e.card},c.a.createElement(oe.a,null,c.a.createElement(O.a,{variant:"h5",component:"h2"},c.a.createElement(se.a,{variant:"fab",onClick:this.handleOpen,color:"secondary","aria-label":"Add",className:e.button},c.a.createElement(be.a,null)),c.a.createElement("br",null)))),c.a.createElement(fe.a,{open:this.state.modal,onClose:this.handleClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},c.a.createElement("div",{className:e.modalPaper,style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},c.a.createElement(O.a,{variant:"h6",id:"modal-title"},"create an OTP QR Code"),c.a.createElement(Se.a,null),c.a.createElement("br",null),c.a.createElement(ye.a,{label:"email",onChange:this.emailChange}),c.a.createElement("br",null),c.a.createElement(Ie.a,{htmlFor:"dev-sel"},"Locks"),c.a.createElement(xe.a,{className:e.createDeviceSelect,onChange:this.lockChange,value:this.state.currentLock,inputProps:{name:"device-type",id:"dev-sel"}},c.a.createElement(De.a,{value:0,disabled:!0},"Locks"),t),c.a.createElement("br",null),c.a.createElement(se.a,{className:e.creteDeviceButton,color:"primary",onClick:this.createOtp},"Create"))))}}]),t}(n.Component),qe=Object(d.withStyles)(function(e){return{card:{minWidth:275,minHeight:172},modalPaper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit},button:{left:"42%",marginTop:"15%"},creteDeviceButton:{margin:e.spacing.unit,left:"80%"},createDeviceSelect:{margin:e.spacing.unit}}})(Me),Be=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).deleteClick=function(){var e,t=a.props.otp;e=t.id,B.service("otp").patch(e,{status:"inactive"})},a.aproveClick=function(){var e,t=a.props.otp;e=t.id,B.service("otp").patch(e,{status:"active"})},a.state={userName:void 0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;K(this.props.otp.user_id).then(function(t){e.setState({userName:t.name})})}},{key:"componentDidUpdate",value:function(e){var t=this;e.otp.user_id!==this.props.otp.user_id&&K(this.props.otp.user_id).then(function(e){t.setState({userName:e.name})})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.otp,n=a.user_id?this.state.userName:"No linked Account";return c.a.createElement(ne.a,{className:t.card},c.a.createElement(oe.a,null,c.a.createElement(O.a,{className:t.title,color:"textSecondary",gutterBottom:!0},a.status),c.a.createElement(O.a,{variant:"h5",component:"h2"},a.reciever_email),c.a.createElement(O.a,{className:t.pos,color:"textSecondary"},n)),c.a.createElement(ie.a,null,c.a.createElement(se.a,{size:"small",onClick:this.deleteClick},"Delete"),a.user_id&&"aproval pending"===a.status?c.a.createElement(se.a,{size:"small",onClick:this.aproveClick},"Aprove"):null))}}]),t}(n.Component),Re=Object(d.withStyles)({card:{minWidth:125},title:{fontSize:14},pos:{marginBottom:12}})(Be);var Ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={otpList:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve(B.authenticate().then(function(e){var t=e.user.id;return B.service("otp").find({query:{granted_by_user:t}})})).then(function(t){e.setState({otpList:t.data})}),U.service("otp").on("created",function(t){e.setState(function(e){return{otpList:e.otpList.concat(t)}})}),U.service("otp").on("patched",function(t){e.setState(function(e){return"inactive"===t.status?{otpList:e.otpList.filter(function(e){return e.id!==t.id})}:{otpList:e.otpList.map(function(e){return t.id===e.id?t:e})}})})}},{key:"render",value:function(){return c.a.createElement("div",null,"One-Time-Passwords QR Codes",c.a.createElement("br",null),c.a.createElement(Se.a,null),c.a.createElement("br",null),c.a.createElement(he.a,{className:{width:500,height:450},cols:3},c.a.createElement(ve.a,null,c.a.createElement(qe,null)),this.state.otpList?this.state.otpList.map(function(e){return e?c.a.createElement(ve.a,{key:e.id},c.a.createElement(Re,{otp:e})):null}):null))}}]),t}(n.Component),We=a(182),ze=a.n(We),Ke=a(183),Ue=a(94),Fe=a(184),He=a.n(Fe),Ge=a(185),Qe=a.n(Ge),Ve=a(186),$e=a.n(Ve),Je=a(187),Ze=a.n(Je),Xe=a(38),Ye=a.n(Xe);function et(e){var t=e.classes,a=e.inputRef,n=void 0===a?function(){}:a,i=e.ref,r=Object(Ue.a)(e,["classes","inputRef","ref"]);return c.a.createElement(ye.a,Object.assign({fullWidth:!0,InputProps:{inputRef:function(e){i(e),n(e)},classes:{input:t.input}}},r))}function tt(e,t){var a=t.query,n=t.isHighlighted,i=$e()(e.email,a),r=Ze()(e.email,i);return c.a.createElement(De.a,{selected:n,component:"div"},c.a.createElement("div",null,r.map(function(e,t){return e.highlight?c.a.createElement("span",{key:String(t),style:{fontWeight:500}},e.text):c.a.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)})))}function at(e){return e.email}var nt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={single:"",popper:"",suggestions:[]},a.handleSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:function(e,t){var a=He()(e.trim()).toLowerCase(),n=a.length,c=0;return 0===n?[]:t.filter(function(e){var t=c<5&&e.email.slice(0,n).toLowerCase()===a;return t&&(c+=1),t})}(t,a.props.suggestions)})},a.handleSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.handleChange=function(e){return function(t,n){var c=n.newValue;a.setState(Object(Ke.a)({},e,c))}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes,t={renderInputComponent:et,suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,getSuggestionValue:at,renderSuggestion:tt};return c.a.createElement("div",{className:e.root},c.a.createElement(Qe.a,Object.assign({},t,{inputProps:{classes:e,placeholder:this.props.placeholder,value:this.props.value,onChange:this.props.onChange},theme:{container:e.container,suggestionsContainerOpen:e.suggestionsContainerOpen,suggestionsList:e.suggestionsList,suggestion:e.suggestion},renderSuggestionsContainer:function(e){return c.a.createElement(Ye.a,Object.assign({},e.containerProps,{square:!0}),e.children)}})))}}]),t}(c.a.Component),ct=Object(d.withStyles)(function(e){return{root:{height:60,flexGrow:1},container:{position:"relative"},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*e.spacing.unit}}})(nt);var it=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={modal:!1,userId:void 0,locks:void 0,currentLock:0,suggestions:[],imageUri:void 0,userEmail:"",keyName:""},a.handleOpen=function(){a.setState({modal:!0})},a.handleClose=function(){a.setState({modal:!1})},a.emailChange=function(e,t){var n=t.newValue,c=a.state.suggestions.filter(function(e){return e.email===n}),i=c[0]?c[0]:[];console.log(i),a.setState({userId:i.id,userEmail:n})},a.lockChange=function(e){a.setState({currentLock:e.target.value})},a.lockChange=function(e){a.setState({currentLock:e.target.value})},a.nameChange=function(e){a.setState({keyName:e.target.value})},a.createKey=function(){var e=a.state;(function(e,t,a,n){return B.authenticate().then(function(){return B.service("key").create({user_id:e,lock_id:t,faceUri:a,name:n})})})(e.userId,e.currentLock,e.imageUri,e.keyName).then(function(){a.setState({modal:!1,userEmail:""})})},a.onDrop=function(e,t){console.log(t),a.setState({imageUri:t[0]})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;z().then(function(t){e.setState({locks:t.locks})}).then(function(){U.service("user").find({query:{$select:["id","email"]}}).then(function(t){e.setState({suggestions:t.data})})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.locks?this.state.locks.map(function(e){return c.a.createElement(De.a,{key:e.id,value:e.id},e.name)}):null;return c.a.createElement("div",null,c.a.createElement(ne.a,{className:e.card},c.a.createElement(oe.a,null,c.a.createElement(O.a,{variant:"h5",component:"h2"},c.a.createElement(se.a,{variant:"fab",onClick:this.handleOpen,color:"secondary","aria-label":"Add",className:e.button},c.a.createElement(be.a,null)),c.a.createElement("br",null)))),c.a.createElement(fe.a,{open:this.state.modal,onClose:this.handleClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},c.a.createElement("div",{className:e.modalPaper,style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},c.a.createElement(O.a,{variant:"h6",id:"modal-title"},"Create a new key."),c.a.createElement(Se.a,null),c.a.createElement("br",null),c.a.createElement(ye.a,{label:"key name",onChange:this.nameChange}),c.a.createElement("br",null),c.a.createElement(ct,{onChange:this.emailChange,suggestions:this.state.suggestions,value:this.state.userEmail,placeholder:"Search Users by email"}),c.a.createElement("br",null),c.a.createElement(Ie.a,{htmlFor:"dev-sel"},"Locks"),c.a.createElement(xe.a,{className:e.createDeviceSelect,onChange:this.lockChange,value:this.state.currentLock,inputProps:{name:"device-type",id:"dev-sel"}},c.a.createElement(De.a,{value:0,disabled:!0},"Locks"),t),c.a.createElement("br",null),c.a.createElement(ze.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg",".png",".jpeg"],maxFileSize:5242880}),c.a.createElement(se.a,{className:e.creteDeviceButton,color:"primary",onClick:this.createKey},"Create"))))}}]),t}(n.Component),rt=Object(d.withStyles)(function(e){return{card:{minWidth:275,minHeight:172},modalPaper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit},button:{left:"42%",marginTop:"15%"},creteDeviceButton:{margin:e.spacing.unit,left:"80%"},createDeviceSelect:{margin:e.spacing.unit}}})(it),ot=a(129),lt=a.n(ot),st=a(188),ut=a(59),mt=a.n(ut),dt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).deleteClick=function(){var e,t=a.props.cardKey;e=t.id,B.authenticate().then(function(t){return B.service("key").remove(e)})},a.state={avatarUri:null,userName:void 0},a}var a;return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:(a=Object(st.a)(lt.a.mark(function e(){var t=this;return lt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return K(this.props.cardKey.user_id).then(function(e){t.setState({userName:e.name})}),console.log(this.props.cardKey.image_path),e.next=4,U.service("uploads").get(this.props.cardKey.image_path).then(function(e){console.log(e),t.setState({avatarUri:e.uri})});case 4:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.cardKey,n=this.state.avatarUri,i=a.user_id?this.state.userName:"No linked Account";return console.log(n),c.a.createElement(ne.a,{className:t.card},c.a.createElement(oe.a,{className:t.row},c.a.createElement(mt.a,{className:t.avatar,src:n||null}),c.a.createElement(O.a,{variant:"h5",component:"h2"},a.name,c.a.createElement(O.a,{className:t.pos,color:"textSecondary"},i))),c.a.createElement(ie.a,null,c.a.createElement(se.a,{size:"small",onClick:this.deleteClick},"Delete")))}}]),t}(n.Component),ht=Object(d.withStyles)({card:{minWidth:125,minHeight:172},title:{fontSize:14},pos:{marginBottom:12},row:{display:"flex",justifyContent:"center",minWidth:125},avatar:{width:80,height:80,marginRight:25}})(dt),pt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={keyList:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve(B.authenticate().then(function(e){var t=e.user.locks.map(function(e){return e.id});return B.service("key").find({query:{lock_id:{$in:t}}})})).then(function(t){e.setState({keyList:t.data})}),U.service("key").on("created",function(t){e.setState(function(e){return{keyList:e.keyList.concat(t)}})}),U.service("key").on("removed",function(t){e.setState(function(e){return{keyList:e.keyList.filter(function(e){return e.id!==t.id})}})})}},{key:"render",value:function(){return c.a.createElement("div",null,"Keys",c.a.createElement("br",null),c.a.createElement(Se.a,null),c.a.createElement("br",null),c.a.createElement(he.a,{className:{width:500,height:450},cols:3},c.a.createElement(ve.a,null,c.a.createElement(rt,null)),this.state.keyList?this.state.keyList.map(function(e){return e?c.a.createElement(ve.a,{key:e.id},c.a.createElement(ht,{cardKey:e})):null}):null))}}]),t}(n.Component),vt=a(511),gt=function(e){var t=e.component,a=Object(Ue.a)(e,["component"]);return c.a.createElement(P.a,Object.assign({},a,{render:function(e){return localStorage.getItem("feathers-jwt")?c.a.createElement(t,e):c.a.createElement(vt.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ft=c.a.createElement(D.a,null,c.a.createElement(P.a,{exact:!0,path:"/login",component:Le}),c.a.createElement(gt,{exact:!0,path:"/",component:te}),c.a.createElement(gt,{exact:!0,path:"/access",component:we}),c.a.createElement(gt,{exact:!0,path:"/OTP",component:Ae}),c.a.createElement(gt,{exact:!0,path:"/keys",component:pt}));var Et=Object(d.withStyles)(function(e){return{root:{flexGrow:1,zIndex:1,overflow:"hidden",position:"relative",display:"flex",minHeight:"600px"},appBar:{zIndex:e.zIndex.drawer+1},drawerPaper:{position:"relative",width:260},content:{flexGrow:1,background:e.palette.background.default,padding:3*e.spacing.unit,minWidth:0,paddingTop:10*e.spacing.unit},toolbar:e.mixins.toolbar}})(function(e){var t=e.classes;return c.a.createElement("div",{className:t.root},c.a.createElement(g.a,{position:"absolute",className:t.appBar},c.a.createElement(E.a,null,c.a.createElement(mt.a,{src:"/logo.png"}),c.a.createElement(O.a,{variant:"title",color:"inherit",noWrap:!0},"Ping\xfcilock"))),c.a.createElement(p.a,{variant:"permanent",classes:{paper:t.drawerPaper}},c.a.createElement("div",{className:t.toolbar}),c.a.createElement(k.a,null,T)),c.a.createElement("main",{className:t.content},c.a.createElement("div",null,ft)))}),bt=(a(506),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("feathers-jwt")&&U.authenticate()}},{key:"render",value:function(){var e=Object(d.createMuiTheme)({palette:{primary:{main:"#212121"},secondary:{main:"#ff5722"}}});return c.a.createElement("div",null,c.a.createElement(d.MuiThemeProvider,{theme:e},c.a.createElement(Et,null)))}}]),t}(n.Component)),kt=a(510);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(kt.a,null,c.a.createElement(bt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[253,2,1]]]);
//# sourceMappingURL=main.658bfc45.chunk.js.map